apiVersion: v1
kind: ConfigMap
metadata:
  name: vulnzero-config
  namespace: vulnzero
  labels:
    app: vulnzero
data:
  # Application Configuration
  ENVIRONMENT: "production"
  LOG_LEVEL: "INFO"

  # API Configuration
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  API_WORKERS: "4"
  API_ALGORITHM: "HS256"
  ACCESS_TOKEN_EXPIRE_MINUTES: "30"
  REFRESH_TOKEN_EXPIRE_DAYS: "7"

  # Database Configuration
  DATABASE_POOL_SIZE: "20"
  DATABASE_MAX_OVERFLOW: "10"
  DATABASE_ECHO: "false"

  # Redis Configuration
  REDIS_MAX_CONNECTIONS: "50"

  # Celery Configuration
  CELERY_TASK_TRACK_STARTED: "true"
  CELERY_TASK_TIME_LIMIT: "3600"
  CELERY_TASK_SOFT_TIME_LIMIT: "3300"

  # LLM Configuration
  LLM_PROVIDER: "openai"
  OPENAI_MODEL: "gpt-4-turbo-preview"
  OPENAI_MAX_TOKENS: "4096"
  OPENAI_TEMPERATURE: "0.2"
  ANTHROPIC_MODEL: "claude-3-sonnet-20240229"
  ANTHROPIC_MAX_TOKENS: "4096"

  # Rate Limiting
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_PER_MINUTE: "100"
  RATE_LIMIT_PER_HOUR: "1000"

  # Deployment Settings
  DEPLOYMENT_STRATEGY: "canary"
  DEPLOYMENT_HEALTH_CHECK_TIMEOUT: "300"
  DEPLOYMENT_ROLLBACK_ENABLED: "true"
  DEPLOYMENT_MAX_PARALLEL: "10"

  # Monitoring
  PROMETHEUS_PORT: "9090"
  ENABLE_AUDIT_LOGGING: "true"

  # Feature Flags
  FEATURE_AUTO_REMEDIATION: "true"
  FEATURE_MANUAL_APPROVAL_REQUIRED: "false"
  FEATURE_CRITICAL_VULN_AUTO_APPROVE: "true"
  FEATURE_ML_PRIORITIZATION: "true"
